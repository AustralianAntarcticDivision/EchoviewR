<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="EchoviewR">
<title>Getting started with EchoviewR • EchoviewR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting started with EchoviewR">
<meta property="og:description" content="EchoviewR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">EchoviewR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/BroadbandST.html">Broadband SIngle Targets</a>
    <a class="dropdown-item" href="../articles/Getting_Started.html">Getting started with EchoviewR</a>
    <a class="dropdown-item" href="../articles/Introduction.html">EchoviewR - Basic Functionality</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/AustralianAntarcticDivision/EchoviewR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Getting started with EchoviewR</h1>
                        <h4 data-toc-skip class="author">Sven
Gastauer</h4>
            
            <h4 data-toc-skip class="date">2024-05-14</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/AustralianAntarcticDivision/EchoviewR/blob/HEAD/vignettes/Getting_Started.Rmd" class="external-link"><code>vignettes/Getting_Started.Rmd</code></a></small>
      <div class="d-none name"><code>Getting_Started.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="echoviewr">EchoviewR<a class="anchor" aria-label="anchor" href="#echoviewr"></a>
</h2>
<p><code>EchoviewR</code> is an R package, distributed freely via <a href="https://github.com/AustralianAntarcticDivision/EchoviewR" class="external-link">GitHub</a>.
<code>EchoviewR</code> allows the user to easily access and automate
some of the functionality included in <a href="https://www.echoview.com/" class="external-link">Echoview</a> through simplification of
<a href="https://support.echoview.com/WebHelp/How_to/Run_Echoview_using_scripts/Automation_using_COM_objects/Scripting_with_COM_objects.htm" class="external-link">COM
scripting</a>.<br>
Main benefits of EchoviewR:</p>
<ul>
<li>Automated processing of large amount of data files<br>
</li>
<li>Easy template sharing<br>
</li>
<li>Standardisation of processing methods<br>
</li>
<li>Integration of Echoview funcitonality into R</li>
</ul>
<p><code>EchoviewR</code> is not a replacement for <em>Echoview</em>, on
the contrary, in order to be able to use EchoviewR you will have to have
Echoview installed on your local machine with a valid user licence
including the scripting module.</p>
<p>For more information on EchoviewR, please refer to the <a href="https://www.frontiersin.org/articles/10.3389/fmars.2015.00015/full" class="external-link">original
paper introducing <em>EchoviewR</em></a></p>
<div class="section level4">
<h4 id="help-and-support">Help and Support<a class="anchor" aria-label="anchor" href="#help-and-support"></a>
</h4>
<p>If you need help with a specific <code>EchoviewR</code> function,
generally it is a good idea to check the description. The help for any
function within EchoviewR can be accessed within R (for example help
about the bottom detection function can be accessed as
<code><a href="../reference/EVBottomDetection.html">?EVBottomDetection</a></code>).<br><code>EchoviewR</code> contains some vignettes, acting as extended
documentation. Vigenettes are best viewed in a browser (e.g. Chromium,
Opera, Firefox or Chrome). To browse vignettes in your preferred browser
use:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/browseVignettes.html" class="external-link">browseVignettes</a></span><span class="op">(</span><span class="st">"EchoviewR"</span><span class="op">)</span></span></code></pre></div>
<p>If you need further support or are missing some functionality in
<code>EchoviewR</code>, please comment or make a feature erquest on <a href="https://github.com/AustralianAntarcticDivision/EchoviewR" class="external-link">GitHub</a>.</p>
</div>
<div class="section level4">
<h4 id="copyright-and-licence">Copyright and Licence<a class="anchor" aria-label="anchor" href="#copyright-and-licence"></a>
</h4>
<p>Copyright (C) 2015 Lisa-Marie Harrison, Martin Cox, Georg Skaret,
Sven Gastauer and Rob Harcourt.</p>
<pre><code>EchoviewR is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

EchoviewR is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with EchoviewR.  If not, see &lt;http://www.gnu.org/licenses/&gt;.
This package is open for community development and we encourage users 
to extend the package as they need. We are not liable for any losses 
when using EchoviewR.</code></pre>
<p>If using EchoviewR, please cite as:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/citation.html" class="external-link">citation</a></span><span class="op">(</span><span class="st">"EchoviewR"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## To cite EchoviewR in publications use:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##   Harrison LK, Cox MJ, Skaret G and Harcourt R (2015). The {R} package</span></span>
<span><span class="co">##   EchoviewR for automated processing of active acoustic data using</span></span>
<span><span class="co">##   Echoview. Frontiers in Marine Science, 2:15, doi:</span></span>
<span><span class="co">##   10.3389/fmars.2015.00015</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## A BibTeX entry for LaTeX users is</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##   @Article{,</span></span>
<span><span class="co">##     title = {The R package EchoviewR for automated processing of active acoustic data using Echoview},</span></span>
<span><span class="co">##     author = {Lisa-Marie K Harrison and Martin J Cox and Georg Skaret and Robert Harcourt},</span></span>
<span><span class="co">##     journal = {Frontiers in Marine Science},</span></span>
<span><span class="co">##     year = {2015},</span></span>
<span><span class="co">##     volume = {2},</span></span>
<span><span class="co">##     number = {15},</span></span>
<span><span class="co">##     doi = {10.3389/fmars.2015.00015},</span></span>
<span><span class="co">##   }</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="installing-echoviewr">Installing EchoviewR<a class="anchor" aria-label="anchor" href="#installing-echoviewr"></a>
</h3>
<p>At the moment of writing, <code>EchoviewR</code> has a few
dependencies:</p>
<ul>
<li>(<code>sp</code>)[<a href="https://cran.r-project.org/web/packages/sp/index.html" class="external-link uri">https://cran.r-project.org/web/packages/sp/index.html</a>] -
Adding more spatial functionality to the package<br>
</li>
<li>(<code>geosphere</code>)[<a href="https://cran.r-project.org/package=geosphere" class="external-link uri">https://cran.r-project.org/package=geosphere</a>] - For
improved distance calculations<br>
</li>
<li>(<code>devtools</code>)[<a href="https://cran.r-project.org/package=devtools" class="external-link uri">https://cran.r-project.org/package=devtools</a>] - To
install packages from GitHub</li>
<li>(<code>maptools</code>)[<a href="https://cran.r-project.org/package=maptools" class="external-link uri">https://cran.r-project.org/package=maptools</a>] - More
spatial funcitonality<br>
</li>
<li>(<code>RDCOMClient</code>)[<a href="https://github.com/omegahat/RDCOMClient" class="external-link uri">https://github.com/omegahat/RDCOMClient</a>] - Enable COM
communication through R<br>
</li>
<li>(<code>lubridate</code>)[<a href="https://cran.r-project.org/web/packages/lubridate/vignettes/lubridate.html" class="external-link uri">https://cran.r-project.org/web/packages/lubridate/vignettes/lubridate.html</a>]
- Improved date manipulations</li>
</ul>
<p>Packages sp, geosphere, maptools and lubridate can be directly
installed from CRAN. We will use a simple function to check if the
packages are installed and loaded. If this is not the case, the packages
will be installed and loaded:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Make sure package is installed and loaded</span></span>
<span><span class="va">packagecheck</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">package</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="va">package</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/utils/installed.packages.html" class="external-link">installed.packages</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">{</span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="va">package</span>, dependencies<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">}</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va">package</span>,character.only <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co">#Now we can check if the packages are isntalled</span></span>
<span><span class="va">packagelist</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'sp'</span>,<span class="st">'geosphere'</span>,<span class="st">'maptools'</span>,<span class="st">'lubridate'</span>,<span class="st">'devtools'</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/apply.html" class="external-link">apply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="va">packagelist</span><span class="op">)</span>,<span class="fl">1</span>,<span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="fu">packagecheck</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><code>RDCOMClient</code> has to be installed through GitHub, via
Omegahat:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"omegahat/RDCOMClient"</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://github.com/omegahat/RDCOMClient" class="external-link">RDCOMClient</a></span><span class="op">)</span></span></code></pre></div>
<p>Once all the dependencies have been satisfied <code>EchoviewR</code>
can be installed:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">'AustralianAntarcticDivision/EchoviewR'</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://github.com/AustralianAntarcticDivision/EchoviewR" class="external-link">EchoviewR</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level4">
<h4 id="installing-a-specific-version-of-echoviewr">Installing a specific version of EchoviewR<a class="anchor" aria-label="anchor" href="#installing-a-specific-version-of-echoviewr"></a>
</h4>
<p>If you want to use a previous verison of EchoviewR (for example
v1.0):</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">'AustralianAntarcticDivision/EchoviewR'</span>, ref<span class="op">=</span><span class="st">'v1.0'</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="installing-echoviewr-behind-a-proxy">Installing EchoviewR behind a proxy<a class="anchor" aria-label="anchor" href="#installing-echoviewr-behind-a-proxy"></a>
</h4>
<p>If you are behind a proxy, you will have to set the proxy settings
first, before installing packages via GitHub in R:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">packagecheck</span><span class="op">(</span><span class="st">"httr"</span><span class="op">)</span></span>
<span><span class="fu">set_config</span><span class="op">(</span><span class="fu">use_proxy</span><span class="op">(</span>url<span class="op">=</span><span class="va">PROXYURL</span>, port<span class="op">=</span><span class="va">PORT</span>, username<span class="op">=</span><span class="va">USERNAME</span>,password<span class="op">=</span><span class="va">PASSWORD</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Once the proxy is set, you should be able to use
<code>install_github()</code> from the <code>devtools</code>
package.</p>
</div>
</div>
<div class="section level3">
<h3 id="starting-and-quitting-echoview">Starting and quitting Echoview<a class="anchor" aria-label="anchor" href="#starting-and-quitting-echoview"></a>
</h3>
<p>Once EchoviewR is installed, you can start and quit Echoview from
within R:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Create an Echoview application object and start Echoview</span></span>
<span><span class="va">EVApp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/StartEchoview.html">StartEchoview</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Quit the application again</span></span>
<span><span class="fu"><a href="../reference/QuitEchoview.html">QuitEchoview</a></span><span class="op">(</span><span class="va">EVApp</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="basic-functionality">Basic Functionality<a class="anchor" aria-label="anchor" href="#basic-functionality"></a>
</h3>
<div class="section level4">
<h4 id="creating-a-new-file">Creating a new file<a class="anchor" aria-label="anchor" href="#creating-a-new-file"></a>
</h4>
<p>Generally the first step is to either create a new empty file, create
a new file based on a template, or open an existing EV File:</p>
<ul>
<li>Create a new empty EV file</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#First start Echoview</span></span>
<span><span class="va">EVApp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/StartEchoview.html">StartEchoview</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Create a new empty file inside our Echoview object EVApp</span></span>
<span><span class="va">EVFile</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/EVNewFile.html">EVNewFile</a></span><span class="op">(</span><span class="va">EVApp</span><span class="op">)</span><span class="op">$</span><span class="va">EVFile</span></span>
<span></span>
<span><span class="co">#Close the file</span></span>
<span><span class="fu"><a href="../reference/EVCloseFile.html">EVCloseFile</a></span><span class="op">(</span><span class="va">EVFile</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Quit Echoview </span></span>
<span><span class="fu"><a href="../reference/QuitEchoview.html">QuitEchoview</a></span><span class="op">(</span><span class="va">EVApp</span><span class="op">)</span></span></code></pre></div>
<ul>
<li>Create a new EV file based on a template<br>
In order to create a new EV file based on a template, we have to tell
EchoviewR within which Echoview application object (here EVApp) we want
to create the new EV file and where the template is located on our local
machine (templatefn=TemplateFilename)</li>
</ul>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 1) Start Echoview</span></span>
<span><span class="co"># 2) Create a new file based on a template (TemplateFilename)</span></span>
<span><span class="co"># 3) Save the EV file as OutputFilenam</span></span>
<span><span class="co"># 4) Close the file</span></span>
<span><span class="co"># 5) Quit Echoview</span></span>
<span></span>
<span><span class="co">#Set the tempalte filename</span></span>
<span><span class="va">TemplateFilename</span> <span class="op">=</span> <span class="st">"temp.EV"</span></span>
<span><span class="co">#Set the output filename</span></span>
<span><span class="va">OutputFilename</span> <span class="op">=</span> <span class="st">"NewFile.EV"</span></span>
<span></span>
<span><span class="co">#Start Echoview</span></span>
<span><span class="va">EVApp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/StartEchoview.html">StartEchoview</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Create a new file based on the template TemplateFilename</span></span>
<span><span class="va">EVFile</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/EVNewFile.html">EVNewFile</a></span><span class="op">(</span><span class="va">EVApp</span>, templateFn <span class="op">=</span> <span class="va">TemplateFilename</span><span class="op">)</span><span class="op">$</span><span class="va">EVFile</span></span>
<span></span>
<span><span class="co">#Save the file under a new name</span></span>
<span><span class="fu"><a href="../reference/EVSaveAsFile.html">EVSaveAsFile</a></span><span class="op">(</span>EVFile <span class="op">=</span> <span class="va">EVFile</span>, fileName <span class="op">=</span> <span class="va">OutputFilename</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Close the file</span></span>
<span><span class="fu"><a href="../reference/EVCloseFile.html">EVCloseFile</a></span><span class="op">(</span><span class="va">EVFile</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Quit Echoview </span></span>
<span><span class="fu"><a href="../reference/QuitEchoview.html">QuitEchoview</a></span><span class="op">(</span><span class="va">EVApp</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="open-an-existing-ev-file">Open an existing EV file<a class="anchor" aria-label="anchor" href="#open-an-existing-ev-file"></a>
</h4>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">EVFILENAME</span> <span class="op">=</span> <span class="st">"TestEv.EV"</span></span>
<span></span>
<span><span class="co">#Start Echoview</span></span>
<span><span class="va">EVApp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/StartEchoview.html">StartEchoview</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Open the EV File</span></span>
<span><span class="fu"><a href="../reference/EVOpenFile.html">EVOpenFile</a></span><span class="op">(</span>EVAppObj <span class="op">=</span> <span class="va">EVApp</span>, fileName <span class="op">=</span> <span class="va">EVFILENAME</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Save the file</span></span>
<span><span class="fu"><a href="../reference/EVSaveFile.html">EVSaveFile</a></span><span class="op">(</span>EVFile <span class="op">=</span> <span class="va">EVFile</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Close the file</span></span>
<span><span class="fu"><a href="../reference/EVCloseFile.html">EVCloseFile</a></span><span class="op">(</span><span class="va">EVFile</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Quit Echoview </span></span>
<span><span class="fu"><a href="../reference/QuitEchoview.html">QuitEchoview</a></span><span class="op">(</span><span class="va">EVApp</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="clear-raw-data-from-the-fileset">Clear raw data from the fileset<a class="anchor" aria-label="anchor" href="#clear-raw-data-from-the-fileset"></a>
</h4>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/EVClearRawData.html">EVClearRawData</a></span><span class="op">(</span><span class="va">EVFile</span>, filesetName <span class="op">=</span> <span class="va">fsetname</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="add-raw-data">Add raw data<a class="anchor" aria-label="anchor" href="#add-raw-data"></a>
</h4>
<p>Often analysing acoustic data requires the processing of a lot of raw
files. Handling such vast amounts of data (multiple gigbytes to
terabytes) can be a dawning task. Even with current computaitonal power
and software capabilities, it is often a wise idea to process files in
multiple steps rather than all at once. If en Echoview template for
processing the data is available, the different raw files can be snet to
Echoview in a loop. Before we can start the loop, we need to know the
filenames and location of the raw files.</p>
<div class="section level5">
<h5 id="gather--raw-files">Gather .raw files<a class="anchor" aria-label="anchor" href="#gather--raw-files"></a>
</h5>
<ul>
<li>Define the folder where the raw files are located</li>
</ul>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rawDir</span> <span class="op">&lt;-</span> <span class="st">"blabla"</span></span></code></pre></div>
<ul>
<li>Get all raw files from a folder</li>
</ul>
<p>We can get all the files of a certain pattern from a folder using the
<code>list.files</code> function, contained within R base. Here we set
<code>path</code> to the previously defined <code>rawDir</code>, the
options <code>full.names=TRUE</code> to include the path, and pattern as
<code>glob2rx(".*raw")</code> to only include files strictly matching
<em>.raw</em> i.e. not including <em>.raw.evi</em>.</p>
<p>If more raw files are inside subfolders of <code>rawDir</code>, the
option <code>recursive</code> should be set to <code>TRUE</code>.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">raws</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span>path<span class="op">=</span><span class="va">rawDir</span>, pattern<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/utils/glob2rx.html" class="external-link">glob2rx</a></span><span class="op">(</span><span class="st">"*.raw"</span><span class="op">)</span>, full.names <span class="op">=</span> <span class="cn">TRUE</span>, recursive <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<ul>
<li>Get all raw files from a list of folders</li>
</ul>
<p>If raw files are inside multiple folder we can create a vector
containing all the folders and wrap the previously used function to get
the raw files from a single folder into an <code>apply</code>
function:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rawDirs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"folder1"</span>,<span class="st">"folder2"</span><span class="op">)</span></span>
<span><span class="va">raws</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/apply.html" class="external-link">apply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="va">rawdirs</span><span class="op">)</span>,<span class="fl">1</span>,<span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span>path<span class="op">=</span><span class="va">x</span>, pattern<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/utils/glob2rx.html" class="external-link">glob2rx</a></span><span class="op">(</span><span class="st">"*.raw"</span><span class="op">)</span>, full.names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="adding-raw-files">Adding raw files<a class="anchor" aria-label="anchor" href="#adding-raw-files"></a>
</h5>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/EVAddRawData.html">EVAddRawData</a></span><span class="op">(</span>EVFile <span class="op">=</span> <span class="va">EVFile</span>, filesetName <span class="op">=</span> <span class="va">fsetname</span>, dataFiles <span class="op">=</span> <span class="va">raws</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level4">
<h4 id="selecting-variables">Selecting Variables<a class="anchor" aria-label="anchor" href="#selecting-variables"></a>
</h4>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Select Sv raw as EVVar</span></span>
<span><span class="va">EVVar</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/EVAcoVarNameFinder.html">EVAcoVarNameFinder</a></span><span class="op">(</span><span class="va">EVFile</span>,<span class="st">"070: Sv pings T1"</span><span class="op">)</span><span class="op">$</span><span class="va">EVVar</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="running-a-bottom-detection">Running a bottom detection<a class="anchor" aria-label="anchor" href="#running-a-bottom-detection"></a>
</h4>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Run bottom detection</span></span>
<span><span class="va">bottom</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/EVBottomDetection.html">EVBottomDetection</a></span><span class="op">(</span>EVVar <span class="op">=</span> <span class="va">EVVar</span>,</span>
<span>                            EVFile <span class="op">=</span> <span class="va">EVFile</span>,</span>
<span>                            LineName <span class="op">=</span> <span class="st">"Maximum Sv"</span>, </span>
<span>                            StopDepth <span class="op">=</span> <span class="fl">150</span>, </span>
<span>                            StartDepth <span class="op">=</span> <span class="fl">5</span>,</span>
<span>                            algorithm <span class="op">=</span> <span class="fl">2</span>,</span>
<span>                            MinSv <span class="op">=</span> <span class="op">-</span><span class="fl">50</span>,</span>
<span>                            DiscriminationLevel <span class="op">=</span> <span class="op">-</span><span class="fl">45</span>,</span>
<span>                            BackstepRange <span class="op">=</span> <span class="op">-</span><span class="fl">1.50</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="running-a-school-detection">Running a school detection<a class="anchor" aria-label="anchor" href="#running-a-school-detection"></a>
</h4>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/EVSchoolsDetect.html">EVSchoolsDetect</a></span><span class="op">(</span>EVFile <span class="op">=</span> <span class="va">EVFile</span>,</span>
<span>               acoVarName<span class="op">=</span><span class="st">'70 kHz Speed &gt; 2.5'</span>,</span>
<span>               outputRegionClassName <span class="op">=</span> <span class="st">'agg'</span>,</span>
<span>               deleteExistingRegions <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>               distanceMode <span class="op">=</span> <span class="st">"GPS distance"</span>,</span>
<span>               maximumHorizontalLink <span class="op">=</span> <span class="fl">10</span>, <span class="co">#m</span></span>
<span>               maximumVerticalLink <span class="op">=</span> <span class="fl">2</span>,<span class="co">#m</span></span>
<span>               minimumCandidateHeight <span class="op">=</span> <span class="fl">1</span>, <span class="co">#m</span></span>
<span>               minimumCandidateLength <span class="op">=</span> <span class="fl">3</span>, <span class="co">#m</span></span>
<span>               minimumSchoolHeight <span class="op">=</span> <span class="fl">1</span>, <span class="co">#m</span></span>
<span>               minimumSchoolLength <span class="op">=</span> <span class="fl">3</span>, <span class="co">#m</span></span>
<span>               dataThreshold <span class="op">=</span> <span class="op">-</span><span class="fl">70</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Export Aggregation information</span></span>
<span><span class="fu"><a href="../reference/EVIntegrationByRegionsExport.html">EVIntegrationByRegionsExport</a></span><span class="op">(</span>EVFile <span class="op">=</span> <span class="va">EVFile</span>, acoVarName <span class="op">=</span> <span class="st">"Aggregation mask"</span>, </span>
<span>                             regionClassName<span class="op">=</span><span class="st">'agg'</span>,</span>
<span>                             exportFn<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">evex</span>,<span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">basename</a></span><span class="op">(</span><span class="va">rawdirs</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>,<span class="st">'_AGG.csv'</span><span class="op">)</span>,</span>
<span>                             dataThreshold <span class="op">=</span><span class="op">-</span><span class="fl">80</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Export Aggregations @ a resolution of 200 m x 5 m</span></span>
<span></span>
<span><span class="co">#Change grid</span></span>
<span><span class="fu"><a href="../reference/EVChangeVariableGrid.html">EVChangeVariableGrid</a></span><span class="op">(</span>EVFile<span class="op">=</span><span class="va">EVFile</span>, </span>
<span>                     acoVarName <span class="op">=</span> <span class="st">"Aggregation mask"</span>, </span>
<span>                     timeDistanceGridType<span class="op">=</span><span class="fl">5</span>,</span>
<span>                     timeDistanceGridDistance <span class="op">=</span> <span class="fl">200</span>,</span>
<span>                     depthGridType<span class="op">=</span><span class="fl">1</span>,</span>
<span>                     depthGridDistance <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span>
<span><span class="co">#Export </span></span>
<span><span class="fu"><a href="../reference/EVExportIntegrationByCells.html">EVExportIntegrationByCells</a></span><span class="op">(</span>EVFile<span class="op">=</span><span class="va">EVFile</span>, variableName<span class="op">=</span><span class="st">'Aggregation mask'</span>, </span>
<span>                             filePath<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">evex</span>, <span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">basename</a></span><span class="op">(</span><span class="va">rawdirs</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>,<span class="st">'_INT.csv'</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#export seabed</span></span>
<span><span class="fu"><a href="../reference/EVExportLineAsCSV.html">EVExportLineAsCSV</a></span><span class="op">(</span>EVFile<span class="op">=</span><span class="va">EVFile</span>, acoVarName<span class="op">=</span><span class="st">'Aggregation mask'</span>,</span>
<span>                    lineName<span class="op">=</span><span class="st">'Surface Exclusion Threshold'</span>,</span>
<span>                    filePath<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">evex</span>,<span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">basename</a></span><span class="op">(</span><span class="va">rawdirs</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>,<span class="st">'_seabed.csv'</span>,sep<span class="op">=</span><span class="st">''</span><span class="op">)</span><span class="op">)</span></span>
<span>  </span>
<span><span class="co">#export gps</span></span>
<span><span class="fu"><a href="../reference/EVExportUnderlying.html">EVExportUnderlying</a></span><span class="op">(</span>EVFile<span class="op">=</span><span class="va">EVFile</span>, variableName<span class="op">=</span><span class="st">'070: position GPS fixes'</span>, </span>
<span>                     pingRange <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="op">-</span><span class="fl">1</span><span class="op">)</span>, </span>
<span>                     filePath<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">evex</span>,<span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">basename</a></span><span class="op">(</span><span class="va">rawdirs</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>,<span class="st">'_GPS.csv'</span>,sep<span class="op">=</span><span class="st">''</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/EVSaveAsFile.html">EVSaveAsFile</a></span><span class="op">(</span><span class="va">EVFile</span>,<span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">evex</span>,<span class="st">"Montague_"</span>,<span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">basename</a></span><span class="op">(</span><span class="va">rawdirs</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>,<span class="st">'.EV'</span>,sep<span class="op">=</span><span class="st">''</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Quit Echoview</span></span>
<span><span class="fu"><a href="../reference/QuitEchoview.html">QuitEchoview</a></span><span class="op">(</span><span class="va">EVApp</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Martin Cox, Sven Gastauer, Lisa-Marie Harrison.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
